dLighter={$:function(a){return document.getElementById(a)},_Core:{},_Lexer:{},_Theme:{}};(function(d){var a=navigator.userAgent.toLowerCase();var b;(b=a.match(/msie ([\d.]+)/))?d.ie=b[1]:(b=a.match(/firefox\/([\d.]+)/))?d.firefox=b[1]:(b=a.match(/chrome\/([\d.]+)/))?d.chrome=b[1]:(b=a.match(/opera.([\d.]+)/))?d.opera=b[1]:(b=a.match(/version\/([\d.]+).*safari/))?d.safari=b[1]:0;(b=a.match(/mac os x (\d+)[\._](\d+)/))?(d.macOS=b[1]+"."+b[2]):d.winOS=true;var e=document.createElement("canvas");d.hasCanvas=(e!==null&&typeof e.getContext==="function")?true:false;d.extend=function(h,c){for(var g in c){if(h[g]==null){h[g]=c[g]}else{console.trace();d.log(g);throw"extend error!"}}};d.MTDelegate=function(h,c,f,i,g){this.ele=h;this.d_h=c;this.m_h=f;this.u_h=i;this.__cmv_handler=null;this.__cmu_handler=null;this._m_down=false;this._op={x:0,y:0};this.btn=g==="right"?2:0};d.MTDelegate.prototype={_mousedown_handler:function(g){if(g.button!==this.btn||this._m_down){return}this._m_down=true;var f=d.getEventPoint(g);g.eventX=f.x;g.eventY=f.y;this._op.x=f.x;this._op.y=f.y;var c=this.d_h.call(this.ele,g);if(c===false){d.stopEvent(g)}},_mouseup_handler:function(g){if(this._m_down!==false){return}this._m_down=false;var f=d.getEventPoint(g);g.eventX=f.x;g.eventY=f.y;var c=this.u_h.call(this.ele,g);if(c===false){d.stopEvent(g)}},_mousemove_handler:function(g){if(this._m_down===false){return}var f=d.getEventPoint(g);g.eventX=f.x;g.eventY=f.y;g.deltaX=f.x-this._op.x;g.deltaY=f.y-this._op.y;var c=this.m_h.call(this.ele,g);if(c===false){d.stopEvent(g)}},_chrome_mousemove_handler:function(c){this._mousemove_handler(c)},_chrome_mouseup_handler:function(c){this._mouseup_handler(c);d.delEvent(window,"mousemove",this.__cmv_handler);d.delEvent(window,"mouseup",this.__cmu_handler)},_chrome_mousedown_handler:function(c){if(c.button!==this.btn||this._m_down){return}this._mousedown_handler(c);d.addEvent(window,"mousemove",this.__cmv_handler);d.addEvent(window,"mouseup",this.__cmu_handler)},init:function(){if(typeof this.ele.setCapture==="function"||d.opera){d.addEvent(this.ele,"mousedown",d.createDelegate(this,this._mousedown_handler));d.addEvent(this.ele,"mouseup",d.createDelegate(this,this._mouseup_handler));d.addEvent(this.ele,"mousemove",d.createDelegate(this,this._mousemove_handler))}else{this.__cmv_handler=d.createDelegate(this,this._chrome_mousemove_handler);this.__cmu_handler=d.createDelegate(this,this._chrome_mouseup_handler);d.addEvent(this.ele,"mousedown",d.createDelegate(this,this._chrome_mousedown_handler))}}};d.extend(d,{log:function(c){if(typeof jQuery.log==="function"){jQuery.log.apply(this,arguments)}else{console.log.apply(this,arguments)}},getEventPoint:function(f){var c=0,g=0;if(typeof f.offsetX!=="undefined"){c=f.offsetX;g=f.offsetY}else{if(typeof f.x!=="undefined"){c=f.x,g=f.y}else{if(typeof f.layerX!=="undefined"){c=f.layerX;g=f.layerY}else{throw"no x,y in event(_getEventPoint)"}}}return{x:c,y:g}},addEvent:function(g,f,c){if(typeof g==="string"){g=d(g)}if(window.addEventListener){g.addEventListener(f,c)}else{g.attachEvent("on"+f,c)}},delEvent:function(g,f,c){if(typeof g==="string"){g=d(g)}if(window.removeEventListener){g.removeEventListener(f,c)}else{g.detachEvent("on"+f,c)}},createDelegate:function(c,f){return function(){f.apply(c,arguments)}},stopEvent:function(c){if(c==null){return}if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}if(c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}},addWheelEvent:function(f,c){if(typeof f==="string"){f=d(f)}if(window.addEventListener){if(this.firefox){d.log("addwheel");f.addEventListener("DOMMouseScroll",c)}else{f.addEventListener("mousewheel",c)}}else{f.attachEvent("onmousewheel",c)}},inherit:function(c,h){if(typeof c==="undefined"||typeof h==="undefined"){console.trace();throw"inherit error!"}for(var g in h.prototype){var j=c.prototype[g];if(typeof j==="undefined"){c.prototype[g]=h.prototype[g]}}c.__base_objects__=new Array();c.__base_objects__.push(h);if(typeof h.__base_objects__!=="undefined"){for(var f=0;f<h.__base_objects__.length;f++){c.__base_objects__.push(h.__base_objects__[f])}}c.prototype.base=function(l){var n=null,o=undefined;if(typeof this.__inherit_deep__==="undefined"){this.__inherit_deep__=0}else{this.__inherit_deep__++}n=c.__base_objects__[this.__inherit_deep__];if(typeof l==="undefined"||l==null){o=n.call(this)}else{if(l instanceof Array===true){o=n.apply(this,l)}else{var k=new Array();for(var m=0;m<arguments.length;m++){k.push(arguments[m])}o=n.apply(this,k)}}this.__inherit_deep__--;return o};c.prototype.callBase=function(q,l){var n=null,p=undefined;if(typeof this.__inherit_deep__==="undefined"){this.__inherit_deep__=0}else{this.__inherit_deep__++}n=c.__base_objects__[this.__inherit_deep__];var o=n.prototype[q];if(typeof o==="function"){if(typeof l==="undefined"||l===null){p=o.call(this)}else{if(l instanceof Array===true){p=o.apply(this,l)}else{var k=new Array();for(var m=1;m<arguments.length;m++){k.push(arguments[m])}p=o.apply(this,k)}}}else{throw"There is no method:"+q+" in baseClass"}this.__inherit_deep__--;return p}},FONT_INFO_TABLE:{},getFontInfo:function(f,c){if(this.FONT_INFO_TABLE[c]==null){this.FONT_INFO_TABLE[c]={}}var g=this.FONT_INFO_TABLE[c][f];if(g==null){g=this.FONT_INFO_TABLE[c][f]=this._calcFontInfo(f,c)}return g},_calcFontInfo:function(c,m){var g=document.createElement("div"),k=document.createElement("span"),l=document.createElement("span"),i=0;g.style.margin="0px";g.style.padding="0px";g.style.position="relative";k.style.font=c+"px "+m;k.style.margin="0px";k.style.padding="0px";k.style.verticalAlign="baseline";l.style.font="0px "+m;l.style.margin="0px";l.style.padding="0px";l.style.verticalAlign="baseline";var f="@白羊座小葛 04-02.I Love Daisy.南京大学";k.innerHTML=f;l.innerHTML=f;g.appendChild(l);g.appendChild(k);document.body.appendChild(g);var i=g.offsetHeight;var j=k.offsetHeight+k.offsetTop-l.offsetTop;document.body.removeChild(g);return{height:i,baseline:l.offsetTop,baseline_offset:j}},getPTPRange:function(f,c){return Math.sqrt(Math.pow(f.x-c.x,2)+Math.pow(f.y-c.y,2))},getEventPoint:function(f){var c=0,g=0;if(typeof f.offsetX!=="undefined"){c=f.offsetX;g=f.offsetY}else{if(typeof f.x!=="undefined"){c=f.x,g=f.y}else{if(typeof f.layerX!=="undefined"){c=f.layerX;g=f.layerY}else{throw"no x,y in event(_getEventPoint)"}}}return{x:c,y:g}}})})(dLighter.$);(function(b,a){b.config={tag_name:"pre",theme:"dLighter",max_height:2000};b.go=function(){if(!a.hasCanvas){alert("dLighter is not supported by your browser");return}var c=document.getElementsByTagName(b.config.tag_name);for(var d=0;d<c.length;d++){var e=c[d],g=e.getAttribute("src");if(g&&g.trim()!==""){b._ajaxCreate(e,g.trim())}else{var f=e.textContent||e.innerText||"  ";b._create(e,f)}}};b.__lighter__id=0;b._ajax=function(c,d){this.ce=c;this.src=d;this.load_delegate=a.createDelegate(this,this.onload)};b._ajax.prototype={load:function(){jQuery.get(this.src,this.load_delegate,"text")},onload:function(c){b._create(this.ce,c)}};b._ajaxCreate=function(d,e){var c=new b._ajax(d,e);c.load()};b._create=function(c,q){var f=parseInt(c.getAttribute("width"))||c.offsetWidth;var g=parseInt(c.getAttribute("height"));var m=["position","display","left","top"];var l=c.getAttribute("theme")||b.config.theme||"plain";var r=c.getAttribute("lang")||c.getAttribute("language")||"plain";var o=c.getAttribute("breakline")=="true"?true:false;var k=c.getAttribute("class");var d=c.getAttribute("line_number_start")||c.getAttribute("lns")||"1";var e=document.createElement("div");var t=window.getComputedStyle(c,null);for(var j=0;j<m.length;j++){e.style[m[j]]=t.getPropertyValue(m[j])}var n=b.__lighter__id++;e.setAttribute("class",k?k+" dLighter":"dLighter");e.setAttribute("id","dLighter-"+n);e.style.position="relative";e.style.overflow="hidden";e.style.width=f+"px";e.style.height=g+"px";c.parentElement.appendChild(e);c.style.display="none";e.innerHTML='<!-- dLighter(http://xiaoge.me) --><canvas id="dLighter-canvas-'+n+'" class="dLighter-canvas"></canvas><div id="dLighter-scroll-ver-bar-'+n+'" class="dLighter-scroll-ver-bar"><div id="dLighter-scroll-ver-button-'+n+'" class="dLighter-scroll-ver-button"></div></div><div id="dLighter-scroll-hor-bar-'+n+'" class="dLighter-scroll-hor-bar"><div id="dLighter-scroll-hor-button-'+n+'" class="dLighter-scroll-hor-button"></div></div><!-- dLighter end -->';var p=document.createElement("textarea");p.style.imeMode="disabled";p.setAttribute("class","dLighter-caret");p.setAttribute("id","dLighter-caret-"+n);document.body.appendChild(p);var h=b._Theme.get(l,{font_size:parseInt(t.getPropertyValue("font-size")),font_name:t.getPropertyValue("font-family")});var s=new b._Core._Lighter({container:e,canvas:a("dLighter-canvas-"+n),caret:p,ver_scroll:a("dLighter-scroll-ver-button-"+n),hor_scroll:a("dLighter-scroll-hor-button-"+n)},{width:f,height:g,max_height:b.config.max_height,language:r,break_line:o,text:q.replace(/\t/g,"    ").replace(/\r/g,""),theme:h,lexer:b._Lexer.get(r),line_number_start:parseInt(d)});return s};b.createLighter=function(c){if(!a.hasCanvas){alert("dLighter is not supported by your browser");return}var e=c.getAttribute("src").trim();if(e!==""){b._ajaxCreate(c,e)}else{var d=c.textContent||c.innerText||"  ";b._create(c,d)}}})(dLighter,dLighter.$);(function(b,a){b._Lighter=function(e,d){this.container=e.container;this.canvas=e.canvas;this.caret=e.caret;this.scroll_ver=new b._Scroll(e.ver_scroll,"ver");this.scroll_hor=new b._Scroll(e.hor_scroll,"hor");this.theme=d.theme;this.lang_style=this.theme.getLanguageStyle(d.language);this.lexer=d.lexer;var c=a.getFontInfo(this.theme.font_size,this.theme.font_name);this.font_height=c.height;this.baseline_offset=c.baseline_offset;this.line_height=this.font_height;this.break_line=d.break_line?true:false;this.scroll_breadth=this.theme.scroll_breadth;this.width=d.width>b._Lighter.MAX_CANVAS_WIDTH?b._Lighter.MAX_CANVAS_WIDTH:d.width;this.max_height=d.max_height?d.max_height:b._Lighter.MAX_CANVAS_HEIGHT;this.height_fixed=d.height>0?true:false;this.height=d.height>0?d.height:this.max_height;this.container.style.background=this.theme.background;this.canvas_width=this.width-this.scroll_breadth;this.canvas_height=this.height;this.canvas.width=this.canvas_width;this.canvas.height=this.canvas_height;this.scroll_left=0;this.scroll_top=0;this.line_number_start=d.line_number_start;this.caret_pos={index:-1,para:0,para_at:-1,left:0,line:0,top:0};this.cur_page=new b._Page(this);this.render=new b._Render(this);this.scheduler=new b._Scheduler(this);this.caret_left=0;this.caret_top=0;this.caret_height=this.font_height;this.focused=false;this.scroll_ver.addListener(this);this.scroll_hor.addListener(this);this.scroll_ver.attachWheelEvent(this.canvas);this.scroll_ver.setBreadth(this.scroll_breadth);this.scroll_hor.setBreadth(this.scroll_breadth);this.initCaret();this.initEvent();if(typeof d.text==="string"){this.setText(d.text)}};b._Lighter.MAX_CANVAS_HEIGHT=3000;b._Lighter.MAX_CANVAS_WIDTH=3000;b._Lighter.prototype={onScroll:function(c,d){this._caretStopFlash();if(c==="ver"){this.scroll_top=d}else{this.scroll_left=d}this.paint();this._resetCaret()},resize:function(){var f=this.cur_page.page_height,c=f>this.max_height?this.max_height:f;var e=this.height_fixed?this.height:c;var d=this.height_fixed?this.height:c;if(this.cur_page.max_line_width>this.width){this.scroll_hor.setScrollMax(this.cur_page.max_line_width-this.width);this.scroll_hor.setLength(this.width-this.scroll_breadth);this.scroll_hor.show();if(!this.height_fixed){d+=this.scroll_breadth}else{e-=this.scroll_breadth}}else{this.scroll_hor.hide()}if(e<f){this.scroll_ver.setLength(d);this.scroll_ver.setScrollMax(f-e);this.scroll_ver.scroll(this.scroll_top);this.scroll_ver.show()}else{this.scroll_ver.hide()}this.canvas_height=e;this.render.height=e;this.canvas.height=e;this.height=d;if(!this.height_fixed){this.container.style.height=d+"px"}},setText:function(c){this.cur_page.setText(c);this.scheduler.fuck()},selectTextCallback:function(c){this.caret.value=c;this.caret.select()},focus:function(){if(this.focused===false){a.log("focus");this.focused=true;this._caretFocus()}},blur:function(){if(this.focused){a.log("blur");this.focused=false;this._caretBlur();if(this.cur_page.select_mode){this.cur_page.select(null);this.paint()}}},paint:function(){this.render.paint()},findText:function(e){var d=this.cur_page.findText(e,this.caret_pos.index+1);if(d<0){return}else{var f=this.cur_page.getCaretByIndex(d-1),c=this.cur_page.getCaretByIndex(d-1+e.length);this.cur_page.select(f,c);this._setCaret(c);this.render.paint()}},show:function(){this.container.style.display="block"},hide:function(){this.container.style.display="none"}}})(dLighter._Core,dLighter.$);(function(b,a){b._Paragraph=function(d,c){this.index=d;this.length=c;this.line_start=-1;this.line_cross=-1;this.lines=[]};b._Line=function(c,e,d){this.end_index=c?c:-1;this.unti_dir=e?e:[];this.width=d?d:0};b._Page=function(c){this.lighter=c;this.text="";this.style_array=[];this.width_array=[];this.para_info=[];this.max_line_width=0;this.style_delegate=a.createDelegate(this,this.style_callback);this.sync={finished:false,go:a.createDelegate(this,this._syncMeasure),init:a.createDelegate(this,this._syncInit),cur_step:0,total_step:0,line_start:0};this._init()};b._Page.prototype={setText:function(c){if(typeof c!=="string"||c.length===0){return}this.text=c;if(typeof window.Int8Array!=="undefined"){this.style_array=new Int8Array(c.length);this.width_array=new Float32Array(c.length)}else{this.style_array=new Array(c.length);this.width_array=new Array(c.length)}this._init();this._layout()},style_callback:function(g,f,d){var c=this.lighter.lang_style.getStyleIndex(d);for(var e=g;e<g+f;e++){this.style_array[e]=c}},_measure:function(){var e=this.lighter.render;e.measure_cache={};e.m_num=0;var c=0;for(var d=0;d<this.para_info.length;d++){this.para_info[d].line_start=c;this.para_info[d].line_cross=this.lighter.render._measure(this.para_info[d]);c+=this.para_info[d].line_cross}this.line_number=c;this.page_height=this.line_height*this.line_number},_syncInit:function(c){this.sync.finished=0;this.sync.cur_step=0;this.sync.line_start=0;this.sync.total_step=c},_syncMeasure:function(d){var f=this.sync;if(f.finished||f.cur_step>=f.total_step){f.finished=true;d.measure_step=f.total_step;return}var e=d.BREAK_TIME;var g=new Date().getTime();var h=g;while(h-g<=e){var c=this.para_info[f.cur_step];c.line_start=f.line_start;c.line_cross=this.lighter.render._measure(c);f.line_start+=c.line_cross;f.cur_step++;if(f.cur_step>=f.total_step){f.finished=true;break}else{h=new Date().getTime()}}this.line_number=f.line_start;this.page_height=this.line_height*this.line_number;d.measure_step=f.cur_step},_layout:function(){var f=-1,e=-1,c=this.text,d=this.text.length;while(true){f=c.indexOf("\n",e+1);if(f<0){break}this.para_info.push(new b._Paragraph(e,f-e));e=f}this.para_info.push(new b._Paragraph(e,c.length-e-1));this.lighter.render.calc_padding_left(this.para_info.length)},_init:function(){this.para_info.length=0;this.line_number=0;this.select_mode=false;this.select_range={from:null,to:null};this.last_find={text:"",next:null};this.line_height=this.lighter.line_height;this.page_height=0;this.max_line_width=0},selectAll:function(){return this.selectByIndex(-1,this.text.length-1)},select:function(d,c){if(d==null||c==null){this.select_mode=false}else{if(d.index>c.index){throw"bad select"}this.select_mode=true;this.select_range={from:d,to:c}}this.lighter.selectTextCallback(this.select_mode?this.text.substring(d.index+1,c.index+1):"")},_getParaByRow:function(e){for(var c=0;c<this.para_info.length;c++){var d=this.para_info[c];if(d.line_start+d.line_cross>e){return c}}return this.para_info.length-1},_getElementCaret_xy:function(s,q,G){q=q<0?0:q;var A=this.lighter.render,u=A.line_height,n=Math.floor(q/u),f=this._getParaByRow(n),g=this.para_info[f],w=g.index,l=0,o=(n+1)*u,E=-1;var p=this.para_info[this.para_info.length-1],c=(p.line_start+p.line_cross)*u;if(o>c){n=p.line_start+p.line_cross-1;o=c;if(G){s=A.width}}var C=A.padding_num+A.padding_left;s-=C;s=s<0?0:s;if(g.length>0){var B=g.index+1,F=B+g.length,t=g.lines[n-g.line_start];var l=0,v=this.text,z=this.width_array,h=this.style_array,j=0,d=(n>g.line_start)?g.lines[n-g.line_start-1].end_index+1:0;var r=false;out_loop:for(var D=0;D<t.unti_dir.length;D++){var m=t.unti_dir[D];for(;d<m.index;d++){j=z[g.index+1+d];if(l+j>s){r=true;break out_loop}l+=j}if(l+m.width>s){l+=m.width;for(;d<m.index+m.length;d++){j=z[g.index+1+d];if(l-j<=s){break}l-=j}r=true;break out_loop}else{l+=m.width;d+=m.length}}if(!r){for(;d<=t.end_index;d++){j=z[g.index+1+d];if(l+j>s){r=true;break}else{l+=j}}if(!r){d--}}E=d;w=E+g.index+1}return{para:f,para_at:E,index:w,line:n-g.line_start,left:l+C,bottom:o}},selectByIndex:function(f,e){var d=this.getBeforeCaretByIndex(f+1),c=this.getCaretByIndex(e);this.select(d,c);return c},getCaretByIndex:function(c){if(c===-1){return{index:-1,para:0,para_at:-1,left:this.lighter.render.padding_num+this.lighter.render.padding_left,line:0,top:0}}for(var d=0;d<this.para_info.length;d++){var e=this.para_info[d];if(e.index+e.length>=c){return this._getCaret_p(d,c-e.index-1)}}},getBeforeCaretByIndex:function(e){var c=this.getCaretByIndex(e);var d=this.text.charCodeAt(e);if(b.Char.isRTL(d)){c.left+=this.width_array[e]}else{c.left-=this.width_array[e]}c.index--;c.para_at--;return c},getCaretLineStart:function(h){var g=this.para_info[h.para],c=h.line-g.line_start,i=c===0?-1:g.lines[c-1].end_index+1;var d=this._getCaret_p(h.para,i);if(c!==0){var f=g.index+i+1,e=this.text.charCodeAt(f);if(b.Char.isRTL(e)){d.left+=this.width_array[f]}else{d.left-=this.width_array[f]}d.index--;d.para_at--}return d},getCaretLineEnd:function(e){var d=this.para_info[e.para],c=e.line-d.line_start,f=d.lines[c].end_index;return this._getCaret_p(e.para,f)},_getPosByIndex:function(c){if(c===-1){return{index:-1,para:0,para_at:-1}}for(var d=0;d<this.para_info.length;d++){var e=this.para_info[d];if(e.index+e.length>=c){return{para:d,para_at:c-e.index-1,index:c}}}},_getLineInfo:function(d){var h=0,g={width:0,offset:0},f=this.lighter.render;for(var e=0;e<this.para_info.length;e++){var c=this.para_info[e];if(c.lines.length+h>d){g.width=c.lines[d-h].width;g.offset=f.padding_num+f.padding_left;break}else{h+=c.lines.length}}return g},_getLineInfo_p:function(e,h){var g={width:0,offset:0},f=this.lighter.render;var c=this.para_info[e],d=c.lines[h];g.width=d!=null?d.width:0;g.offset=f.padding_num+f.padding_left;return g},_getCaret_xy:function(r,p){p=p<0?0:p;var z=this.lighter.render,t=z.line_height,m=Math.floor(p/t),f=this._getParaByRow(m),g=this.para_info[f],v=g.index,j=0,n=(m+1)*t,D=-1;var o=this.para_info[this.para_info.length-1],c=(o.line_start+o.line_cross)*t;if(n>c){n=c;m=o.line_start+o.line_cross-1}var s=g.lines[m-g.line_start];var B=z.padding_num+z.padding_left;r-=B;r=r<0?0:r;if(g.length>0){var A=g.index+1,E=A+g.length;var j=0,u=this.text,w=this.width_array,h=0,d=(m>g.line_start)?g.lines[m-g.line_start-1].end_index+1:0;var q=false;out_loop:for(var C=0;C<s.unti_dir.length;C++){var l=s.unti_dir[C];for(;d<l.index;d++){h=w[g.index+1+d];if(j+h/2>r){q=true;break out_loop}j+=h;if(j>r){d++;q=true;break out_loop}}if(j+l.width>r){j+=l.width;for(;d<l.index+l.length;d++){h=w[g.index+1+d];if(j-h/2<=r){break}j-=h;if(j<=r){d++;break}}q=true;break out_loop}else{j+=l.width;d+=l.length}}if(!q){for(;d<=s.end_index;d++){h=w[g.index+1+d];if(j+h/2>r){break}else{j+=h}}}D=d-1;v+=d}return{para:f,para_at:D,line:m,index:v,left:j+B,top:n-this.lighter.line_height}},_getCaret_p:function(w,v){var e=this.para_info[w],c=e.index+(v=(v===null?e.length-1:v))+1,j=e.line_start,g=0,p=this.lighter.render,h=(j+1)*p.line_height;var n=this.text,f=this.style_array,o=this.width_array,t=p.padding_num+p.padding_left,l=null;if(v>=0){var m=n[c];while(f[c]<0&&v>=-1){c--;v--;m=n[c]}var q=0,r=null;out:for(var u=0;u<e.lines.length;u++){l=e.lines[u];if(l.end_index>=v){var g=0,d=q;for(var s=0;s<l.unti_dir.length;s++){r=l.unti_dir[s];if(r.index>v){break}else{if(r.index+r.length-1<v){for(;d<r.index;d++){g+=o[d+e.index+1]}g+=r.width;d=r.index+r.length}else{for(;d<r.index;d++){g+=o[d+e.index+1]}g+=r.width;for(;d<=v;d++){g-=o[d+e.index+1]}break out}}}for(;d<=v;d++){g+=o[d+e.index+1]}break}q=l.end_index+1}j=e.line_start+u;h=(j+1)*this.lighter.line_height}else{l=e.lines[0]}g+=t;return{para:w,para_at:v,line:j,index:c,left:g,top:h-this.lighter.line_height}},getParaIndex_xy:function(c,g){g=g<0?0:g;c=c<0?0:c;var d=this.lighter.render,e=d.line_height,f=Math.floor(g/e);return this._getParaByRow(f)},selectParaByIndex:function(f){var e=this.para_info[f],d=null,c=this._getCaret_p(f,e.length-1);if(e.length>0){d=this._getCaret_p(f,-1);this.select(d,c)}return c},findText:function(e,j){var d=this.text,f=this.last_find,h=f.text===e?f.next:(f.next=a.getKmpNext(f.text=e));var g=(j<0||j>=d.length)?0:j,c=0;while(true){while(true){if(d[g].value===e[c]){c++;if(c===e.length){return g-c+1}break}else{if(c===0){break}else{c=h[c]}}}g++;if(g===j){break}else{if(g===d.length){g=0}}}return -1}}})(dLighter._Core,dLighter.$);(function(b,a){b._Render=function(c){this.lighter=c;this.page=c.cur_page;this.canvas=c.canvas;this.ctx=this.canvas.getContext("2d");this.width=c.canvas_width;this.height=c.canvas_height;this.baseline_offset=c.baseline_offset;this.measure_width=c.break_line?this.width:Infinity;this.line_height=c.line_height;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.font=c.theme.font;this.SPACE_WIDTH=this.ctx.measureText(" ").width;this.padding_left=Math.round(1.5*this.SPACE_WIDTH);this.padding_num=0};b._Render.SELECT_PADDING=8;b._Render.prototype={calc_padding_left:function(c){var d=this.lighter.line_number_start+c-1;this.ctx.font=this.lighter.theme.font;this.padding_num=this.ctx.measureText(d.toString()).width;if(this.padding_num<3*this.SPACE_WIDTH){this.padding_num=3*this.SPACE_WIDTH}this.padding_num+=Math.round(1.5*this.SPACE_WIDTH);this.measure_width=this.lighter.break_line?this.width-this.padding_num-this.padding_left:Infinity},_paintSelectRange:function(v,g,s,o,y){var q=v===null?g:v,t=this.page.width_array,f=this.page.para_info[q.para],m=q.line-f.line_start,d=f.lines,n=d[m],p=v===null?(m>0?d[m-1].end_index+1:0):v.index-f.index,k=g===null?n.end_index:g.index-f.index-1;var u=this.page._getLineInfo_p(q.para,m);var r=0,j=(v===null?u.offset:v.left),A=j,l=false,c=false;for(var x=0;x<n.unti_dir.length;x++){var z=n.unti_dir[x],e=z.index+z.length;if(!l){if(e<=p){continue}if(z.index>=p){l=true}r=p;j=v===null?u.offset:v.left;A=j}if(l){if(z.index>k){break}for(;r<z.index;r++){A+=t[r+f.index+1]}if(k<e){this.ctx.fillRect(j,s,A-j,y);j=A+z.width;A=j;for(;r<=k;r++){A-=t[r+f.index+1]}this.ctx.fillRect(j,s,A-j,y);c=true;break}else{A+=z.width;r=e}}else{if(k<e){if(g===null){for(;r<e;r++){A-=t[r+f.index+1]}}else{A=g.left}this.ctx.fillRect(j,s,A-j,y);c=true;break}else{for(;r<e;r++){A-=t[r+f.index+1]}this.ctx.fillRect(j,s,A-j,y);j=A+z.width;A=j}l=true}}if(!c){A=g===null?(u.offset+u.width+8):g.left;this.ctx.fillRect(j,s,A-j,y)}else{if(g===null){this.ctx.fillRect(u.offset+u.width,s,8,y)}}},_paintSelect:function(j,k){this.ctx.fillStyle=this.lighter.theme.selected_background;var e=j.line,c=k.line,n=this.line_height,f=this.width;var l=this.lighter.scroll_top,d=Math.floor(l/n),h=(e>=d?e:d)*n-l;if(e===c){if(e>=d){this._paintSelectRange(j,k,h,f,n)}}else{if(e>=d){this._paintSelectRange(j,null,h,f,n);h+=n}var g=e+1<d?d:e+1;for(;g<c;g++){var m=this.page._getLineInfo(g);this.ctx.fillRect(m.offset,h,m.width+b._Render.SELECT_PADDING,n);h+=n;if(h>this.height){break}}if(h<=this.height){j=this.page.getCaretLineStart(k);this._paintSelectRange(j,k,h,f,n)}}},_paintString:function(i,f,h,c,e,g){var d=this.lighter.lang_style.style_array[f];this.ctx.font=d.font;this.ctx.fillStyle=d.color;this.ctx.fillText(i,Math.round(h),Math.round(c))},_paintRange:function(r,f,c,d,o){this.ctx.textAlign=o?"right":"left";var q=this.page.text,h=this.page.width_array,n=this.page.style_array;var p=0,s="",m=0;for(var j=r;j<=f;j++){var e=q[j],g=q.charCodeAt(j),k=j<f?q[j+1]:null,l=k===null?-1:q.charCodeAt(j+1);s+=e;m+=h[j];p+=h[j];if((l<0||n[j+1]!==n[j])&&n[j]>=0){this._paintString(s,n[j],c,d,p,o)}else{if(n[j]<0){break}else{continue}}c+=o?-p:p;s="";p=0}return m},_paintLine:function(h,e,f,k,d){var m=h;var c=this.padding_num+this.padding_left;for(var g=0;g<k.length;g++){var j=k[g],l=0;l=this._paintRange(f+m,f+j.index-1,c,d,false);c+=l;c+=j.width;l=this._paintRange(f+j.index,f+j.index+j.length-1,c,d,true);m=j.index+j.length}if(m<=e){this._paintRange(f+m,f+e,c,d,false)}},_paintContent:function(){var o=this.lighter.scroll_top,e=this.lighter.scroll_left,q=this.line_height,m=this.lighter.line_number_start,p=this.lighter.theme,s=this.page.para_info,f=0,n=o,d=0,c=0;if(n<=0){d=0;c=-n+q}else{d=Math.floor(n/q);c=(d+1)*q-n}var l=0;while(l<s.length&&(f+=s[l].lines.length)<=d){l++}para_loop:for(;l<s.length;l++){this.ctx.font=p.font;this.ctx.fillStyle=p.gutter_number_color;this.ctx.textAlign="right";this.ctx.fillText(m+l,this.padding_num-this.SPACE_WIDTH,c-this.baseline_offset);this.ctx.fillStyle=p.gutter_line_color;this.ctx.fillRect(this.padding_num,0,3,this.height);var r=s[l],k=r.lines,h=0;for(var g=0;g<k.length;g++){this._paintLine(h,k[g].end_index,r.index+1,k[g].unti_dir,c-this.baseline_offset);h=k[g].end_index+1;c+=q;if(c>this.height+q){break para_loop}}}},paint:function(){this.ctx.save();this.ctx.fillStyle=this.lighter.theme.background;this.ctx.fillRect(0,0,this.width,this.height);this.ctx.translate(-this.lighter.scroll_left,0);if(this.page.select_mode){this._paintSelect(this.page.select_range.from,this.page.select_range.to)}if(this.page.text.length>0){this._paintContent()}this.ctx.restore()},_showCaret:function(g,f,e,c,d){if(f+c>0){this.ctx.save();this.ctx.fillStyle=d;this.ctx.fillRect(g,f,e,c);this.ctx.restore()}},_hideCaret:function(e,d,c){this.ctx.putImageData(c,e,d)}}})(dLighter._Core,dLighter.$);(function(b,a){b.Char={isRTL:function(d){return d>=1536&&d<=1791},isBiaoDian:function(d){return(d>=32&&d<=47)||(d>=58&&d<=64)||(d>=91&&d<=96)||(d>=123&&d<=126)},isDigit:function(d){return d>=48&&d<=57},isIdeographic:function(e,d){if(e>=11904&&e<=12287){return true}if(e===12288){return true}if(e>=12352&&e<=12447){if(!d){switch(e){case 12353:case 12355:case 12357:case 12359:case 12361:case 12387:case 12419:case 12421:case 12423:case 12430:case 12437:case 12438:case 12443:case 12444:case 12445:case 12446:return false}}return true}if(e>=12448&&e<=12543){if(!d){switch(e){case 12448:case 12449:case 12451:case 12453:case 12455:case 12457:case 12483:case 12515:case 12517:case 12519:case 12526:case 12533:case 12534:case 12539:case 12540:case 12541:case 12542:return false}}return true}if(e>=13312&&e<=19893){return true}if(e>=19968&&e<=40891){return true}if(e>=63744&&e<=64217){return true}if(e>=40960&&e<=42127){return true}if(e>=42128&&e<=42191){return true}if(e>=65122&&e<=65126){return true}if(e>=65296&&e<=65305){return true}return false}};a.extend(b._Render.prototype,{_getRTLLength:function(m,l,e){var g=false,h=1,f=l+1,k=0;while(f<e){var d=m[f],j=d.charCodeAt(0);if(b.Char.isRTL(j)){if(g){h+=k;g=false;k=0}h++}else{if(b.Char.isBiaoDian(j)){k++;g=true}else{break}}f++}return h},_measureStrElement:function(c,e){this.ctx.font=this.lighter.lang_style.style_array[c].font;var d=this.ctx.measureText(e).width;return d},_measure:function(c){c.lines=[new b._Line(-1,[],0)];return this._doMeasure(c)},_m_LTR:function(k,s,v,h,t,j,g,y,f){var z=t-1,n=false,u=0,B=t,q=j;var F=f;var w=this.measure_width-k;var l=-1;var A=0,p=0,x="";while(B<F){var C=s[B],D=C.charCodeAt(0),E=B===t?null:s[B-1],d=E===null?-1:E.charCodeAt(0),m=B+1<f?s[B+1]:null,o=(m===null?-1:m.charCodeAt(0));if(b.Char.isRTL(D)){F=B;break}if(E===null||d<0||h[B]!==h[B-1]){A=0;x=""}x+=C;p=this._measureStrElement(h[B],x);v[B]=p-A;A=p;u+=v[B];if(u<w){if(D<0||D===32||D===9||((D===44||D===46||D===58||D===59)&&(B===y||!b.Char.isDigit(s.charCodeAt(B-1)))&&(m===null||!b.Char.isDigit(o)))||((D===45||D===47)&&(m===null||!b.Char.isDigit(o)))||D>=11904&&b.Char.isIdeographic(D,true)&&m!==null&&b.Char.isIdeographic(o,false)){n=false;z=B}}else{if(D===32){h[B]=-1;v[B]=0;z=B}else{if(z>=t||n){B=z+1}var r=j-g.line_start;g.lines[r].end_index=B-1-y;g.lines.push(new b._Line());u=0;l=B;k=0;u=0;z=t-1;j++;n=false;continue}}B++}return{left:k+u,line_at:j,end_index:F}},_calc_line_width:function(c,j,g,h){var d=0;for(var f=g;f<=h;f++){if(j[f]>=0){d+=c[f]}}return d},_m_RTL:function(m,s,v,j,t,l,h,y,f){var z=t-1,p=true,u=0,B=t,q=l;var w=this.measure_width-m;var H=t+this._getRTLLength(s,t,f);var n=t;var g=B,E=0,x="";while(B<H){var D=s[B],o=B+1<f?s[B+1]:null,G=D.charCodeAt(0);x+=D;E=this._measureStrElement(j[B],x);if(u+E<w){if(G<1536){p=false;z=B}if(G<1536||o===null||!b.Char.isRTL(o.charCodeAt(0))||j[B+1]!==j[B]){if(G>0){for(var A=g;A<=B;A++){v[A]=E/(B-g+1)}}u+=E;x="";g=B+1}B++}else{if(z>t||p){B=z+1}var r=l-h.line_start;if(!p){var C={index:n-y,length:B-n,width:0};for(var F=n;F<B;F++){C.width+=v[F]}h.lines[r].unti_dir.push(C)}h.lines[r].end_index=B-1-y;h.lines.push(new b._Line(-1,[],0));n=B;for(var A=g;A<=B;A++){v[A]=E/(B-g+1)}x="";g=B;m=0;u=0;z=t-1;l++;p=false}}h.lines[l-h.line_start].unti_dir.push({index:n-y,length:H-n,width:u});return{left:m+u,line_at:l,end_index:H}},_doMeasure:function(o){var l=false,c=o.index+1,e=c+o.length;var k=o.line_start,n=this.page.text,f=this.page.width_array,j=this.page.style_array;var d=0;var g=c,h=null;while(g<e){if(l){h=this._m_RTL(d,n,f,j,g,k,o,c,e)}else{h=this._m_LTR(d,n,f,j,g,k,o,c,e)}k=h.line_at;d=h.left;g=h.end_index;l=!l}o.lines[k-o.line_start].end_index=o.length-1;for(var g=0;g<o.lines.length;g++){var m=this._calc_line_width(f,j,o.index+1+(g===0?0:o.lines[g-1].end_index),o.index+1+o.lines[g].end_index);o.lines[g].width=m;if(this.page.max_line_width<m){this.page.max_line_width=m}}return k-o.line_start+1}})})(dLighter._Core,dLighter.$);(function(b,a){b._Scheduler=function(c){this.GAP=1800;this.BREAK_TIME=280;this.measure_step=0;this.lex_step=0;this.lighter=c;this.lexer=c.lexer;this.page=c.cur_page;this.render=c.render;this.s_delegate=a.createDelegate(this,this._scheduleHandler);this.s_timeout=null};b._Scheduler.prototype={fuck:function(){this.schedule()},stopFuck:function(){if(this.s_timeout!==null){window.clearTimeout(this.s_timeout);this.s_timeout=null}},schedule:function(){if(this.page.para_info.length<this.GAP){this._directSchedule()}else{this.stopFuck();this._syncSchedule()}},_directSchedule:function(){this.lighter.lexer.lex(this.page.text,this.page.style_delegate);this.page._measure();this.lighter.resize();this.render.paint()},_syncSchedule:function(){this.measure_step=0;this.lex_step=0;this.lexer=this.lighter.lexer;this.page=this.lighter.cur_page;this.lexer.sync.init(this.page.para_info.length,this.page.text,this.page.style_delegate);this.page.sync.init(this.page.para_info.length);this._scheduleHandler()},_scheduleHandler:function(){if(this.page.sync.finished&&this.lexer.sync.finished){this._adjust();this.s_timeout=null;return}else{if(this.page.sync.finished){this.lexer.sync.go(this)}else{if(this.lexer.sync.finished){this.page.sync.go(this);this._adjust()}else{if(this.lex_step-this.measure_step>=this.GAP){this.page.sync.go(this);this._adjust()}else{this.lexer.sync.go(this)}}}}this.s_timeout=window.setTimeout(this.s_delegate,100)},_adjust:function(){this.lighter.resize();this.render.paint()}}})(dLighter._Core,dLighter.$);(function(b,a){b._Scroll=function(d,c){this.s_btn=d;this.type=c?c:"ver";if(this.type!=="ver"&&this.type!=="hor"){throw"unknow type of scroll bar at Scroll"}this.s_btn_lengh=0;this.s_bar=d.parentElement;this.s_max=0;this.s_value=0;this.s_length=0;this.s_list=[];this.wheel_handler=a.createDelegate(this,this._scrollwheel_handler);this._scroll_down_=false;this.s_disable=false;this._initEvent()};b._Scroll.prototype={setDisable:function(c){if(c===true){this.s_disable=true;this.s_btn.style.display="none"}else{this.s_disable=false;this.s_btn.style.display="block"}},setSize:function(d,c){this.setBreadth(d);this.setLength(c)},setBreadth:function(c){if(this.type==="ver"){this.s_bar.style.width=this.s_btn.style.width=c+"px"}else{this.s_bar.style.height=this.s_btn.style.height=c+"px"}},setLength:function(c){this.s_btn_lengh=Math.round(c/5);if(this.s_btn_lengh<5){this.s_btn_lengh=5}else{if(this.s_btn_lengh>200){this.s_btn_lengh=200}}this.s_length=c-this.s_btn_lengh;this.s_max=c;if(this.type==="ver"){this.s_bar.style.height=c+"px";this.s_btn.style.height=this.s_btn_lengh+"px"}else{this.s_bar.style.width=c+"px";this.s_btn.style.width=this.s_btn_lengh+"px"}},show:function(c){this.s_bar.style.display="block"},hide:function(){this.s_bar.style.display="none"},addListener:function(d){for(var c=0;c<arguments.length;c++){this.s_list.push(arguments[c])}},attachWheelEvent:function(d){if(this.type==="hor"){return}for(var c=0;c<arguments.length;c++){a.log(arguments[c]);a.addWheelEvent(arguments[c],this.wheel_handler)}},_initEvent:function(){if(typeof this.s_bar.setCapture==="function"){a.addEvent(this.s_bar,"mousedown",a.createDelegate(this,this._scrolldown_handler));a.addEvent(this.s_bar,"mouseup",a.createDelegate(this,this._scrollup_handler));a.addEvent(this.s_bar,"mousemove",a.createDelegate(this,this._scrollmove_handler))}else{this.__scroll_move_handler=a.createDelegate(this,this._chrome_scrollmove_handler);this.__scroll_up_handler=a.createDelegate(this,this._chrome_scrollup_handler);a.addEvent(this.s_bar,"mousedown",a.createDelegate(this,this._chrome_scrollclick_handler));a.addEvent(this.s_btn,"mousedown",a.createDelegate(this,this._chrome_scrolldown_handler))}},setScrollMax:function(c){this.s_max=c},scrollDelta:function(c){this.scroll(this.s_value+c)},scroll:function(c){if(typeof c!=="number"){return this.s_value}this.s_value=c<0?0:(c>this.s_max?this.s_max:c);this.s_btn.style.top=Math.round(this.s_value/this.s_max*this.s_length)+"px"},_scroll:function(d){d=d<0?0:(d>this.s_length?this.s_length:d);this.s_value=Math.round(d/this.s_length*this.s_max);if(this.type==="ver"){this.s_btn.style.top=d+"px"}else{this.s_btn.style.left=d+"px"}for(var c=0;c<this.s_list.length;c++){this.s_list[c].onScroll(this.type,this.s_value)}},scrollToMax:function(){this.scroll(this.s_max)},_scrolldown_handler:function(c){if(this.s_disable===false&&c.button===0){if(c.target===this.s_btn){this._deal_scrolldown(c,false);this.s_bar.setCapture(true)}else{this._deal_scrollclick(c,false)}}},_chrome_scrolldown_handler:function(c){if(this.s_disable===false&&c.button===0){this._deal_scrolldown(c,true);a.addEvent(window,"mousemove",this.__scroll_move_handler);a.addEvent(window,"mouseup",this.__scroll_up_handler)}},_chrome_scrollclick_handler:function(c){if(this.s_disable===false){this._deal_scrollclick(c,true)}},_deal_scrollclick:function(c,f){var d=(this._getScrollOffset(c,f)>(this.type==="ver"?this.s_btn.offsetTop:this.s_btn.offsetLeft))?1:-1;this._scroll((this.type==="ver"?this.s_btn.offsetTop:this.s_btn.offsetLeft)+d*50);a.stopEvent(c)},_deal_scrolldown:function(d,f){var c=f?0:(this.type==="ver"?this.s_btn.offsetTop:this.s_btn.offsetLeft);this._scroll_down_=true;this._pre_scroll_y=this._getScrollOffset(d,f)+c;this._pre_scroll_top=c;a.stopEvent(d)},_chrome_scrollmove_handler:function(c){if(this.s_disable===false&&c.button===0){this._deal_scrollmove(c,true)}},_scrollmove_handler:function(c){if(c.button===0&&this._scroll_down_){this._deal_scrollmove(c,false)}},_deal_scrollmove:function(c,d){this._scroll(this._pre_scroll_top+this._getScrollOffset(c,d)-this._pre_scroll_y);a.stopEvent(c)},_chrome_scrollup_handler:function(c){if(c.button===0&&this._scroll_down_){this._scroll_down_=false;a.delEvent(window,"mousemove",this.__scroll_move_handler);a.delEvent(window,"mouseup",this.__scroll_up_handler);a.stopEvent(c)}},_scrollup_handler:function(c){if(c.button===0&&this._scroll_down_){this._scroll_down_=false;this.s_bar.releaseCapture(true)}},_scrollwheel_handler:function(f){if(this.s_disable||f.ctrlKey||f.metaKey){return}var d=NaN,c=NaN;if(typeof f.wheelDeltaX!=="undefined"){d=f.wheelDeltaX/6;c=f.wheelDeltaY/6}else{if(typeof f.wheelDelta!=="undefined"){c=f.wheelDelta/6}else{if(f.detail){c=-f.detail*10}}}var g=this.type==="hor"?d:c;if(g===NaN){return}else{if(g>0&&this.s_value===0){return}else{if(g<=0&&this.s_value===this.s_max){return}}}a.stopEvent(f);this._scroll(this.s_btn.offsetTop-g)},_getScrollOffset:function(d,g){var f=0,c=0;if(typeof d.offsetX!=="undefined"){f=d.offsetY;c=d.offsetX}else{if(typeof d.x!=="undefined"){f=d.y;c=d.x}else{if(typeof d.layerX!=="undefined"){f=d.layerY;c=d.layerX}else{throw"no y in event(_getScrollOffset)"}}}return(this.type==="ver"?f:c)}}})(dLighter._Core,dLighter.$);(function(c,b){var d=function(g,f,e){var i=g.global?g.global:{};this.font_size=e?e:(i.font_size?i.font_size:c.DEFAULT_FONTSIZE);this.font_name=f?f:(i.font_name?i.font_name:c.DEFAULT_FONTNAME);this.background=i.background?i.background:"white";this.color=i.color?i.color:"black";this.caret_color=i.caret_color?i.caret_color:this.color;this.bold=i.bold?true:false;this.italic=i.italic?true:false;this.scroll_breadth=i.scroll_breadth?i.scroll_breadth:12;var k=g.gutter?g.gutter:{};this.gutter_number_color=k.number_color?k.number_color:this.color;this.gutter_line_color=k.line_color?k.line_color:this.background;var m=g.selected?g.selected:{};this.selected_background=m.background?m.background:"rgba(125,125,125,0.3)";var h=g.highlight?g.highlight:{};this.highlight_background=h.background?h.background:"rgba(232,232,255,1)";this.font=(this.bold?"bold ":"")+(this.italic?"italic ":"")+this.font_size+"px "+this.font_name;var l=g.language?g.language:{};var j=g.code?g.code:{};this.code_style=new a({font:this.font,color:this.color});this.lang_style_hash={};this._initCode(j);this._initLang(l)};d.prototype={_initCode:function(h){for(var i in h){var g=h[i];var f=(g.bold?"bold ":"")+(g.italic?"italic ":"")+(g.font_size?g.font_size:this.font_size)+"px "+(g.font_name?g.font_name:this.font_name);var e=g.color?g.color:this.color;this.code_style.addStyle(i,{font:f,color:e})}},_initLang:function(l){for(var k in l){var h=l[k];var j=this.code_style.copy();for(var i in h){var g=h[i];var f=(g.bold?"bold ":"")+(g.italic?"italic ":"")+(g.font_size?g.font_size:this.font_size)+"px "+(g.font_name?g.font_name:this.font_name);var e=g.color?g.color:this.color;j.addStyle(i,{font:f,color:e})}this._addLangStyle(k,j)}},_addLangStyle:function(e,h){var g=e.split(",");for(var f=0;f<g.length;f++){this.lang_style_hash[g[f].trim()]=h}},getLanguageStyle:function(f){var e=this.lang_style_hash[f];if(e==null){return this.code_style}else{return e}}};var a=function(e){this.style_hash=e?{plain:0}:{};this.style_array=e?[e]:[]};a.prototype={getStyle:function(e){return this.style_array[e]},addStyle:function(f,g){var e=this.style_hash[f];if(e!=null){this.style_array[e]=g}else{e=this.style_array.length;this.style_array.push(g);this.style_hash[f]=e}},getStyleIndex:function(e){var f=this.style_hash[e];return f?f:0},copy:function(){var g=new a();g.style_array.length=this.style_array.length;for(var f in this.style_hash){var e=this.style_hash[f];g.style_hash[f]=e;g.style_array[e]=this.style_array[e]}return g}};b.extend(c,{_theme_list:{},_theme_hash:{},DEFAULT_FONTSIZE:16,DEFAULT_FONTNAME:"consolas",register:function(f){this._theme_list[f.name]=f;var e=f.name+(f.font_name?f.font_name:c.DEFAULT_FONTNAME)+(f.font_size?f.font_size:c.DEFAULT_FONTSIZE);this._theme_hash[e]=new d(f)},get:function(f,e){e=e?e:{};var h=this._theme_list[f];if(!h){h=this._theme_list.plain}var g=h.name+(e.font_name?e.font_name:(h.font_name?h.font_name:c.DEFAULT_FONTNAME))+(e.font_size?e.font_size:(h.font_size?h.font_size:c.DEFAULT_FONTSIZE));var i=this._theme_hash[g];if(!i){i=new d(h,e.font_name,e.font_size);this._theme_hash[g]=i}return i}});c.register({name:"plain",global:{background:"white",color:"black"},selected:{background:"rgba(160,160,160,0.5)"},highlight:{background:"rgba(210,210,210,0.1)"}})})(dLighter._Theme,dLighter.$);(function(b,a){a.extend(b._Lighter.prototype,{_getEventPoint:function(d){var c=a.getEventPoint(d);c.x+=this.scroll_left;c.y+=this.scroll_top;return c},_focus_handler:function(c){this.focus()},_blur_handler:function(c){this.blur()},_deal_leftmouse_down:function(d,c){if(this.__mouse_down_time__===1&&a.getPTPRange(this.__pre_point__,c)<10){this.__mouse_down_time__++;if(this.__mdt_timeout__!==null){window.clearTimeout(this.__mdt_timeout__);this.__mdt_timeout__=null}this.__mdt_timeout__=window.setTimeout(this.__mdt_delegate__,450);this._dblclick_handler(c)}else{if(this.__mouse_down_time__===2&&a.getPTPRange(this.__pre_point__,c)<10){this.__mouse_down_time__=0;if(this.__mdt_timeout__!==null){window.clearTimeout(this.__mdt_timeout__);this.__mdt_timeout__=null}this._tplclick_handler(c)}else{if(!d.ctrlKey&&!d.shiftKey){this.__mouse_down_time__++;this.__mdt_timeout__=window.setTimeout(this.__mdt_delegate__,450)}var f=this.cur_page._getCaret_xy(c.x,c.y);if(d.shiftKey){this._shift_select(f.index)}else{this._setCaret(f);if(this.cur_page.select_mode){this.cur_page.select(null);this.render.paint()}}}}this.__pre_pos__=this.caret_pos;this.__pre_point__=c;this.__down_pos__=this.caret_pos},_leftmousedown_handler:function(d){this.__left_mouse_down__=true;var c=this._getEventPoint(d);this._deal_leftmouse_down(d,c)},_mousedown_handler:function(c){if(c.button===0){this._leftmousedown_handler(c)}c.preventDefault();if(typeof this.canvas.setCapture==="function"){this.canvas.setCapture(true)}},_leftmouseup_handler:function(c,d){this.__left_mouse_down__=false},_mouseup_handler:function(c,d){if(c.button===0){this._leftmouseup_handler(c,d)}if(typeof this.canvas.setCapture==="function"){this.canvas.setCapture(false)}},_deal_leftmouse_move:function(e){outif:if(e.para!==this.__pre_pos__.para||e.para_at!==this.__pre_pos__.para_at){this._setCaret(e);this.focus();var d=this.__down_pos__,c=e;if(d.para===c.para&&d.para_at===c.para_at&&this.cur_page.select_mode){this.cur_page.select(null);break outif}else{if(d.para>c.para||(d.para===c.para&&d.para_at>c.para_at)){d=e;c=this.__down_pos__}}this.cur_page.select(d,c)}this.render.paint();this.__pre_pos__=e},_mousemove_handler:function(d){if(this.__left_mouse_down__){var c=this._getEventPoint(d);this._deal_leftmouse_move(this.cur_page._getCaret_xy(c.x,c.y))}},_chrome_mousemove_handler:function(c){this._mousemove_handler(c,true)},_chrome_mouseup_handler:function(c){this._mouseup_handler(c,true);a.delEvent(window,"mousemove",this.__cmv_handler);a.delEvent(window,"mouseup",this.__cmu_handler)},_chrome_mousedown_handler:function(c){this._mousedown_handler(c);a.addEvent(window,"mousemove",this.__cmv_handler);a.addEvent(window,"mouseup",this.__cmu_handler)},_keydown_handler:function(c){if(this._shortkey_handler(c)){a.stopEvent(c)}},_dblclick_handler:function(f){var e=this.cur_page._getElementCaret_xy(f.x,f.y,true),d=this.cur_page.text;var c=b._WordSeg.getRange(d,e.index);this._setCaret(this.cur_page.selectByIndex(c.from,c.to));this.render.paint()},_tplclick_handler:function(d){var c=this.cur_page.getParaIndex_xy(d.x,d.y);this._setCaret(this.cur_page.selectParaByIndex(c));this.render.paint()},initEvent:function(){this.initShortKey();this.__left_mouse_down__=false;this.__pre_pos__=null;if(typeof this.canvas.setCapture==="function"){a.addEvent(this.canvas,"mousedown",a.createDelegate(this,this._mousedown_handler));a.addEvent(this.canvas,"mouseup",a.createDelegate(this,this._mouseup_handler));a.addEvent(this.canvas,"mousemove",a.createDelegate(this,this._mousemove_handler))}else{this.__cmv_handler=a.createDelegate(this,this._chrome_mousemove_handler);this.__cmu_handler=a.createDelegate(this,this._chrome_mouseup_handler);a.addEvent(this.canvas,"mousedown",a.createDelegate(this,this._chrome_mousedown_handler))}this.__mouse_down_time__=0;this.__mdt_timeout__=null;this.__mdt_delegate__=a.createDelegate(this,function(){this.__mouse_down_time__=0;this.__mdt_timeout__=null});a.addEvent(this.canvas,"mouseup",a.createDelegate(this,this._focus_handler));a.addEvent(this.caret,"keydown",a.createDelegate(this,this._keydown_handler));a.addEvent(this.caret,"blur",a.createDelegate(this,this._blur_handler))}})})(dLighter._Core,dLighter.$);(function(b,a){a.extend(b._Lighter.prototype,{initCaret:function(){this.caret.value="@白羊座小葛 I love Daisy.南京大学软件学院";this.caret_interval=null;this.caret_timeout=null;this.caret_show=false;this.caret_flashing=false;this.caret_data=null;this.caret_flash_delegate=a.createDelegate(this,this._caretFlash);this.caret_delegate=a.createDelegate(this,this._resetCaret);this.caret.onkeydown=function(c){if((c.ctrlKey||c.metaKey)&&/[cr=\-0\ ]/.test(String.fromCharCode(c.keyCode).toLowerCase())){return}else{if(c.keyCode>=112&&c.keyCode<=123){return}}a.stopEvent(c)}},_caretFocus:function(){this.caret.focus();this.caret.select();if(this.caret_timeout===null){this._caretBeginFlash()}},_caretBlur:function(){this._caretStopFlash()},_caretBeginFlash:function(){this._caretShow();if(this.caret_flashing===false){this.caret_flashing=true;this.caret_interval=window.setTimeout(this.caret_flash_delegate,100)}},_caretStopFlash:function(){this._caretHide();if(this.caret_flashing===true){this.caret_flashing=false;window.clearTimeout(this.caret_interval);this.caret_interval=null}},_caretShow:function(){if(!this.caret_show){this.render._showCaret(this.caret_left,this.caret_top,1,this.caret_height,this.theme.caret_color);this.caret_show=true}},_caretHide:function(){if(this.caret_show){this.render._hideCaret(this.caret_left-1,this.caret_top-1,this.caret_data);this.caret_show=false}},_caretFlash:function(){if(!this.caret_show){this._caretShow()}else{this._caretHide()}this.caret_interval=window.setTimeout(this.caret_flash_delegate,550)},_setCaret:function(c){if(this.caret_data!==null){this._caretStopFlash()}this.caret_pos=c;if(this.caret_timeout!==null){window.clearTimeout(this.caret_timeout);this.caret_timeout=null}this.caret_timeout=window.setTimeout(this.caret_delegate,0)},_resetCaret:function(){this.caret_left=Math.round(this.caret_pos.left-this.scroll_left);this.caret_top=Math.round(this.caret_pos.top-this.scroll_top);this.caret.style.left=this.caret_left+"px";this.caret_data=this.render.ctx.getImageData(this.caret_left-1,this.caret_top-1,3,this.caret_height+2);if(this.focused){this._caretBeginFlash()}this.caret_timeout=null},moveCaret:function(e){var f=this.caret_pos,d=f.para,g=f.para_at,c=f;switch(e){case"left":if(g>=0){g--}else{if(d>0){d--;g=null}}c=this.cur_page._getCaret_p(d,g);break;case"right":if(g<this.cur_page.para_info[d].length-1){g++}else{if(d<this.cur_page.para_info.length-1){d++;g=-1}}c=this.cur_page._getCaret_p(d,g);break;case"up":c=this.cur_page._getCaret_xy(f.left,f.top-this.line_height);break;case"down":c=this.cur_page._getCaret_xy(f.left,f.top+this.line_height);break}this.cur_page.select(null);this._caretStopFlash();this.render.paint();this._setCaret(c)}})})(dLighter._Core,dLighter.$);(function(b,a){a.extend(b._Lighter.prototype,{initShortKey:function(){this.SHORTKEY_TABLE={"ctrl-a":this._ctrl_a_handler,"ctrl-up":this._ctrl_up_handler,"ctrl-down":this._ctrl_down_handler,"ctrl-left":this._ctrl_left_handler,"ctrl-right":this._ctrl_right_handler,left:this._left_handler,right:this._right_handler,up:this._up_handler,down:this._down_handler,"shift-left":this._shift_left_handler,"shift-right":this._shift_right_handler,"shift-up":this._shift_up_handler,"shift-down":this._shift_down_handler,"ctrl-shift-left":this._ctrl_shift_left_handler,"ctrl-shift-right":this._ctrl_shift_right_handler,"ctrl-home":this._ctrl_home_handler,"ctrl-end":this._ctrl_end_handler,"shift-home":this._shift_home_handler,"shift-end":this._shift_end_handler,"ctrl-shift-home":this._ctrl_shift_home_handler,"ctrl-shift-end":this._ctrl_shift_end_handler,home:this._home_handler,end:this._end_handler,pageup:this._pageup_handler,pagedown:this._pagedown_handler};this.KEY_TABLE={33:"pageup",34:"pagedown",36:"home",35:"end",37:"left",39:"right",38:"up",40:"down"}},_pageup_handler:function(){this.container.scrollTop-=15*this.line_height*this.render.scale},_pagedown_handler:function(){this.container.scrollTop+=15*this.line_height*this.render.scale},_shift_home_handler:function(){if(this.caret_pos.para_at<0){return}var d=this.cur_page.para_info[this.caret_pos.para],c=this.caret_pos.line-d.line_start,e=c===0?-1:d.lines[c-1].end_index;this._shift_select(d.index+e+1,true)},_shift_end_handler:function(){var c=this.cur_page.para_info[this.caret_pos.para];if(this.caret_pos.para_at===c.length-1){return}this._shift_select(c.index+c.lines[this.caret_pos.line-c.line_start].end_index+1)},_ctrl_shift_home_handler:function(){if(this.caret_pos.index<0){return}this._shift_select(-1)},_ctrl_shift_end_handler:function(){if(this.caret_pos.index===this.cur_page.text.length-1){return}this._shift_select(this.cur_page.text.length-1)},_home_handler:function(){this._setCaret(this.cur_page.getCaretLineStart(this.caret_pos));this.cur_page.select(null);this.render.paint()},_end_handler:function(){this._setCaret(this.cur_page.getCaretLineEnd(this.caret_pos));this.cur_page.select(null);this.render.paint()},_ctrl_home_handler:function(){this._setCaret(this.cur_page.getCaretByIndex(-1));this.cur_page.select(null);this.render.paint()},_ctrl_end_handler:function(){this._setCaret(this.cur_page.getCaretByIndex(this.cur_page.text.length-1));this.cur_page.select(null);this.render.paint()},_ctrl_a_handler:function(){this._setCaret(this.cur_page.selectAll());this.render.paint()},_shift_left_handler:function(){if(this.caret_pos.index<0){return}this._shift_select(this.caret_pos.index-1)},_shift_select:function(c,e){var g=this.caret_pos,i=g.index,h=this.cur_page;if(h.select_mode){var f=h.select_range;g=(f.from.index===i?f.to:f.from);i=g.index}var d=null;if(e){d=h.getBeforeCaretByIndex(c+1)}else{d=h.getCaretByIndex(c)}if(c===i){h.select(null)}else{if(c<i){h.select(d,g)}else{h.select(g,d)}}this._setCaret(d);this.render.paint()},_shift_up_handler:function(){this._shift_select(this.cur_page._getCaret_xy(this.caret_pos.left,this.caret_pos.top-this.line_height).index)},_shift_down_handler:function(){this._shift_select(this.cur_page._getCaret_xy(this.caret_pos.left,this.caret_pos.top+this.line_height).index)},_shift_right_handler:function(){if(this.caret_pos.index>=this.cur_page.text.length-1){return}this._shift_select(this.caret_pos.index+1)},_ctrl_shift_left_handler:function(){if(this.caret_pos.index<0){return}this._shift_select(b._WordSeg.getLeft(this.cur_page.text,this.caret_pos.index))},_ctrl_shift_right_handler:function(){if(this.caret_pos.index>=this.cur_page.text.length-1){return}this._shift_select(b._WordSeg.getRight(this.cur_page.text,this.caret_pos.index+1))},_ctrl_left_handler:function(){var c=this.caret_pos.index;if(c>=0){this._setCaret(this.cur_page.getCaretByIndex(b._WordSeg.getLeft(this.cur_page.text,c)))}this.cur_page.select(null);this.render.paint()},_ctrl_right_handler:function(){var c=this.caret_pos.index+1,d=this.cur_page.text;if(c<d.length){this._setCaret(this.cur_page.getCaretByIndex(b._WordSeg.getRight(d,c)))}this.cur_page.select(null);this.render.paint()},_ctrl_up_handler:function(){this.container.scrollTop-=this.line_height*this.render.scale},_ctrl_down_handler:function(){this.container.scrollTop+=this.line_height*this.render.scale},_left_handler:function(){this.moveCaret("left")},_right_handler:function(){this.moveCaret("right")},_up_handler:function(){this.moveCaret("up")},_down_handler:function(){this.moveCaret("down")},_shortkey_handler:function(f){var i=f.keyCode;var h=a.macOS?f.metaKey:f.ctrlKey;var d=(h?"ctrl-":"")+(f.shiftKey?"shift-":"")+(this.KEY_TABLE[i]==null?String.fromCharCode(i).toLowerCase():this.KEY_TABLE[i]),g=this.SHORTKEY_TABLE[d];if(typeof g==="function"){g.call(this);return true}return false}})})(dLighter._Core,dLighter.$);(function(b,a){b._WordSeg={TYPE:{DIG_WORD:0,ASCII:1,UNICODE:2,OTHER:3,SPACE:4,ARAB:5,NEWLINE:6},_getCharType:function(d){if(d===32||d===9){return this.TYPE.SPACE}else{if(d===10){return this.TYPE.NEWLINE}else{if((d>=97&&d<=122)||(d>=65&&d<=90)||(d>=48&&d<=57)){return this.TYPE.DIG_WORD}else{if(d>=1536&&d<=1791){return this.TYPE.ARAB}else{if(d>256){return this.TYPE.UNICODE}else{return this.TYPE.ASCII}}}}}},getRange:function(d,c){var e=this._getCharType(d.charCodeAt(c));return{from:this._getLeft(d,c,e),to:this._getRight(d,c,e)}},getRight:function(d,c){var e=this._getCharType(d.charCodeAt(c)),f=c;if(e!==this.TYPE.SPACE){f=this._getRight(d,c,e)}return this._getRight(d,f,this.TYPE.SPACE)},getLeft:function(d,c){var f=this._getCharType(d.charCodeAt(c));var e=this._getLeft(d,c,f);if(f===this.TYPE.SPACE&&e>=0){return this._getLeft(d,e,this._getCharType(d.charCodeAt(e)))}else{return e}},_getRight:function(d,c,f){if(f===this.TYPE.UNICODE){return c}for(var e=c+1;e<d.length;e++){if(this._getCharType(d.charCodeAt(e))!==f){return e-1}}if(e===d.length){return e-1}else{return c}},_getLeft:function(d,c,f){var e=c-1;if(f===this.TYPE.UNICODE){return e}for(;e>=0;e--){if(this._getCharType(d.charCodeAt(e))!==f){break}}return e}}})(dLighter._Core,dLighter.$);(function(b,a){a.extend(b,{_str_to_arr:function(l,q){for(var f=0;f<l.length;f++){var p=l[f],h=q[f],s=p.charCodeAt(0),m=p.length,o=0;for(var g=1;g<m;g++){if(s===0){h[g-1]=p.charCodeAt(g)-1}else{var d=p.charCodeAt(g)-1,r=p.charCodeAt(g+1)-1;for(var e=0;e<d;e++){h[o]=r;o++}g++}}}},_lexer_hash:{},register:function(e){var d=e.name.split(",");for(var c=0;c<d.length;c++){this._lexer_hash[d[c].trim()]=e.instance}},get:function(c){if(this._lexer_hash[c]){return this._lexer_hash[c]}else{return this._lexer_hash.plain}}});b.register({name:"plain",instance:{lex:function(e,c,d){}}})})(dLighter._Lexer,dLighter.$);(function(c,b){var a={NO_ACTION:-1,UNKNOW_CHAR:-2,UNMATCH_CHAR:-3};c._LexerBase=function(){this.src=null;this.end=0;this.idx=0;this.chr=-1;this.START_ACTION=0;this.i_s=0;this.yydefault="plain";this.yystyle=null;this.TABLE=null;this.sync={finished:false,go:b.createDelegate(this,this._syncLex),init:b.createDelegate(this,this._syncInit),cur_step:0,total_step:0,cur_idx:0,cur_para:0}};c._LexerBase.prototype={read_ch:function(){throw"must be overwrite"},action:function(d){throw"must be overwrite"},do_lex:function(o,e){var j=true,g,m;this.idx=0;if(o){g=new Date().getTime();m=g;this.idx=this.sync.cur_idx}while(j){var n=0;var f=this.i_s,i=a.NO_ACTION;var q=this.idx,d=a.NO_ACTION,p=0;while(true){if(this.read_ch()<0){if(d>=0){i=d;n=p;this.idx=q+p}else{if(q<this.end){i=a.UNMATCH_CHAR;this.idx=q+1}}if(q>=this.end){j=false;this.sync.finished=true}break}else{n++}var h=this.TABLE._eqc[this.chr];if(h===undefined){if(d>=0){i=d;n=p;this.idx=q+p}else{i=a.UNKNOW_CHAR}break}var k,l=-1,r=f;while(r>=0){k=this.TABLE._base[r]+h;if(this.TABLE._check[k]===r){l=this.TABLE._next[k];break}else{r=this.TABLE._default[r]}}if(l<0){if(d>=0){i=d;n=p;this.idx=q+p}else{i=a.UNMATCH_CHAR;this.idx=q+1}break}else{f=l;i=this.TABLE._action[l];if(i>=0){d=i;p=n}}}this.action(i);this.style_callback(q,n,this.yystyle);if(o&&j){m=new Date().getTime();if(m-g>=e){j=false}}}},yygoto:function(d){this.i_s=d},lex:function(e,d){this.src=e;this.style_callback=d;this.end=this.src.length;this.i_s=this.START_ACTION;this.do_lex(false)},_syncLex:function(d){var e=this.sync;if(e.finished){d.measure_step=e.total_step;return}this.do_lex(true,d.BREAK_TIME);e.cur_idx=this.idx;e.cur_step=e.cur_para;d.lex_step=e.cur_step},_syncInit:function(d,f,e){this.sync.finished=false;this.sync.cur_step=0;this.sync.total_step=d;this.sync.cur_idx=0;this.src=f;this.style_callback=e;this.end=this.src.length;this.i_s=this.START_ACTION}}})(dLighter._Lexer,dLighter.$);(function(a,c){var d=156,b=157,i=158,e=159,h=160,g=161;var f=function(){this.base();this.START_ACTION=156;this.TABLE={_base:(window.Int32Array?new Int32Array(162):new Array(162)),_default:(window.Int32Array?new Int32Array(162):new Array(162)),_check:(window.Int32Array?new Int32Array(4841):new Array(4841)),_next:(window.Int32Array?new Int32Array(4841):new Array(4841)),_action:(window.Int32Array?new Int32Array(162):new Array(162)),_eqc:(window.Int32Array?new Int32Array(256):new Array(256))};a._str_to_arr(["\0\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\2\2\2\1\1\1\1\1\1\2\1\1\1\11\10\2\1\1\1\30\1\77\x68\1\x91\1\xba\xe3\u010c\u0135\u015e\u0187\u01b0\u01d9\u0202\u022b\u0254\u027d\u02a6\u02cf\u02f8\u0321\u034a\u0373\u039c\u03c5\u03ee\u0417\u0440\u0469\u0492\u04bb\u04e4\u050d\u0536\u055f\u0588\u05b1\u05da\u0603\u062c\u0655\u067e\u06a7\u06d0\u06f9\u0722\u074b\u0774\1\u079d\u07c6\u07ef\u0818\u0841\u086a\u0893\u08bc\u08e5\u090e\u0937\u0960\u0989\u09b2\u09db\u0a04\u0a2d\u0a56\u0a7f\u0aa8\u0ad1\u0afa\u0b23\u0b4c\u0b75\u0b9e\u0bc7\u0bf0\u0c19\u0c42\u0c6b\u0c94\u0cbd\u0ce6\u0d0f\u0d38\u0d61\u0d8a\u0db3\u0ddc\u0e05\u0e2e\u0e57\u0e80\u0ea9\u0ed2\u0efb\u0f24\u0f4d\u0f76\u0f9f\u0fc8\u0ff1\u101a\1\1\u1043\u107b\u10b3\u10eb\1\u1123\u115b\u1194\u11cd\1\u1206\u123f\u1278\u12b1","\1\43\0\2\24\3\26\2\43\2\0\3\47\2\0\2\52\3\0\2\55\2\0\2\55\54\0\2\55\67\0\3\55\5\0\2\x95\5\0\2\x9b\5\0","\1\2\x9e\2\47\2\0\2\53\2\34\3\0\2\35\7\0\2\43\2\36\11\0\3\52\2\x94\3\0\2\46\5\0\3\47\2\0\4\47\2\24\2\46\2\26\2\27\2\30\2\31\2\32\2\33\2\25\2\37\2\40\2\44\2\45\3\0\2\41\2\42\3\52\2\0\4\52\2\54\3\0\27\54\2\0\20\54\2\55\3\0\27\55\2\0\20\55\2\57\3\0\27\57\2\0\20\57\2\61\3\0\27\61\2\0\20\61\2\62\3\0\27\62\2\0\20\62\2\63\3\0\27\63\2\0\20\63\2\64\3\0\27\64\2\0\20\64\2\65\3\0\27\65\2\0\20\65\2\66\3\0\27\66\2\0\20\66\2\67\3\0\27\67\2\0\20\67\2\70\3\0\27\70\2\0\20\70\2\71\3\0\27\71\2\0\20\71\2\72\3\0\27\72\2\0\20\72\2\73\3\0\27\73\2\0\20\73\2\74\3\0\27\74\2\0\20\74\2\75\3\0\27\75\2\0\20\75\2\76\3\0\27\76\2\0\20\76\2\77\3\0\27\77\2\0\20\77\2\x40\3\0\27\x40\2\0\20\x40\2\x41\3\0\27\x41\2\0\20\x41\2\x42\3\0\27\x42\2\0\20\x42\2\x43\3\0\27\x43\2\0\20\x43\2\x44\3\0\27\x44\2\0\20\x44\2\x45\3\0\27\x45\2\0\20\x45\2\x46\3\0\27\x46\2\0\20\x46\2\x47\3\0\27\x47\2\0\20\x47\2\x48\3\0\27\x48\2\0\20\x48\2\x49\3\0\27\x49\2\0\20\x49\2\x4a\3\0\27\x4a\2\0\20\x4a\2\x4b\3\0\27\x4b\2\0\20\x4b\2\x4c\3\0\27\x4c\2\0\20\x4c\2\x4d\3\0\27\x4d\2\0\20\x4d\2\x4e\3\0\27\x4e\2\0\20\x4e\2\x4f\3\0\27\x4f\2\0\20\x4f\2\x50\3\0\27\x50\2\0\20\x50\2\x51\3\0\27\x51\2\0\20\x51\2\x52\3\0\27\x52\2\0\20\x52\2\x53\3\0\27\x53\2\0\20\x53\2\x54\3\0\27\x54\2\0\20\x54\2\x55\3\0\27\x55\2\0\20\x55\2\x56\3\0\27\x56\2\0\20\x56\2\x57\3\0\27\x57\2\0\20\x57\2\x58\3\0\27\x58\2\0\20\x58\2\x59\3\0\27\x59\2\0\20\x59\2\x5a\3\0\27\x5a\2\0\20\x5a\2\x5b\3\0\27\x5b\2\0\20\x5b\2\x5d\3\0\27\x5d\2\0\20\x5d\2\x5e\3\0\27\x5e\2\0\20\x5e\2\x5f\3\0\27\x5f\2\0\20\x5f\2\x60\3\0\27\x60\2\0\20\x60\2\x61\3\0\27\x61\2\0\20\x61\2\x62\3\0\27\x62\2\0\20\x62\2\x63\3\0\27\x63\2\0\20\x63\2\x64\3\0\27\x64\2\0\20\x64\2\x65\3\0\27\x65\2\0\20\x65\2\x66\3\0\27\x66\2\0\20\x66\2\x67\3\0\27\x67\2\0\20\x67\2\x68\3\0\27\x68\2\0\20\x68\2\x69\3\0\27\x69\2\0\20\x69\2\x6a\3\0\27\x6a\2\0\20\x6a\2\x6b\3\0\27\x6b\2\0\20\x6b\2\x6c\3\0\27\x6c\2\0\20\x6c\2\x6d\3\0\27\x6d\2\0\20\x6d\2\x6e\3\0\27\x6e\2\0\20\x6e\2\x6f\3\0\27\x6f\2\0\20\x6f\2\x70\3\0\27\x70\2\0\20\x70\2\x71\3\0\27\x71\2\0\20\x71\2\x72\3\0\27\x72\2\0\20\x72\2\x73\3\0\27\x73\2\0\20\x73\2\x74\3\0\27\x74\2\0\20\x74\2\x75\3\0\27\x75\2\0\20\x75\2\x76\3\0\27\x76\2\0\20\x76\2\x77\3\0\27\x77\2\0\20\x77\2\x78\3\0\27\x78\2\0\20\x78\2\x79\3\0\27\x79\2\0\20\x79\2\x7a\3\0\27\x7a\2\0\20\x7a\2\x7b\3\0\27\x7b\2\0\20\x7b\2\x7c\3\0\27\x7c\2\0\20\x7c\2\x7d\3\0\27\x7d\2\0\20\x7d\2\x7e\3\0\27\x7e\2\0\20\x7e\2\x7f\3\0\27\x7f\2\0\20\x7f\2\x80\3\0\27\x80\2\0\20\x80\2\x81\3\0\27\x81\2\0\20\x81\2\x82\3\0\27\x82\2\0\20\x82\2\x83\3\0\27\x83\2\0\20\x83\2\x84\3\0\27\x84\2\0\20\x84\2\x85\3\0\27\x85\2\0\20\x85\2\x86\3\0\27\x86\2\0\20\x86\2\x87\3\0\27\x87\2\0\20\x87\2\x88\3\0\27\x88\2\0\20\x88\2\x89\3\0\27\x89\2\0\20\x89\2\x8a\3\0\27\x8a\2\0\20\x8a\2\x8b\3\0\27\x8b\2\0\20\x8b\2\x8c\3\0\27\x8c\2\0\20\x8c\2\x8d\3\0\27\x8d\2\0\20\x8d\2\x8e\3\0\27\x8e\2\0\20\x8e\2\x8f\3\0\27\x8f\2\0\20\x8f\2\x90\3\0\27\x90\2\0\20\x90\2\x91\3\0\27\x91\2\0\20\x91\2\x92\3\0\27\x92\2\0\20\x92\71\x95\71\x96\71\x97\71\x98\71\x9a\71\x9b\72\x9c\72\x9d\72\x9f\72\xa0\72\xa1\72\xa2","\1\2\11\2\47\2\0\2\7\2\1\3\0\2\36\7\0\2\24\2\34\11\0\2\52\2\51\2\35\3\0\2\43\5\0\3\47\2\0\4\47\3\3\2\7\2\26\5\7\2\2\2\12\2\14\2\30\2\7\3\0\2\16\2\21\3\52\2\0\4\52\2\x5c\3\0\27\x5c\2\0\12\x5c\2\x8a\7\x5c\3\0\27\x5c\2\0\21\x5c\3\0\14\x5c\2\x5d\13\x5c\2\0\21\x5c\3\0\4\x5c\2\x93\23\x5c\2\0\21\x5c\3\0\4\x5c\2\x91\23\x5c\2\0\21\x5c\3\0\2\x8f\26\x5c\2\0\21\x5c\3\0\3\x5c\2\x8e\24\x5c\2\0\21\x5c\3\0\2\x5c\2\x8d\15\x5c\2\x42\10\x5c\2\0\21\x5c\3\0\5\x5c\2\x8b\22\x5c\2\0\21\x5c\3\0\6\x5c\2\x90\21\x5c\2\0\21\x5c\3\0\7\x5c\2\x93\20\x5c\2\0\21\x5c\3\0\7\x5c\2\x8e\20\x5c\2\0\21\x5c\3\0\3\x5c\2\x88\2\x73\23\x5c\2\0\21\x5c\3\0\10\x5c\2\x8e\17\x5c\2\0\21\x5c\3\0\7\x5c\2\x86\20\x5c\2\0\21\x5c\3\0\11\x5c\2\x92\16\x5c\2\0\21\x5c\3\0\2\x5c\2\x82\25\x5c\2\0\21\x5c\3\0\2\x80\26\x5c\2\0\21\x5c\3\0\12\x5c\2\x93\15\x5c\2\0\21\x5c\3\0\11\x5c\2\x7d\16\x5c\2\0\21\x5c\3\0\13\x5c\2\x87\14\x5c\2\0\21\x5c\3\0\13\x5c\2\x81\14\x5c\2\0\21\x5c\3\0\5\x5c\2\x7b\22\x5c\2\0\21\x5c\3\0\11\x5c\2\x7a\16\x5c\2\0\21\x5c\3\0\12\x5c\2\x79\15\x5c\2\0\21\x5c\3\0\15\x5c\2\x82\12\x5c\2\0\21\x5c\3\0\2\x76\26\x5c\2\0\21\x5c\3\0\11\x5c\2\x75\16\x5c\2\0\21\x5c\3\0\15\x5c\2\x74\12\x5c\2\0\21\x5c\3\0\11\x5c\2\x72\16\x5c\2\0\21\x5c\3\0\14\x5c\2\x70\13\x5c\2\0\21\x5c\3\0\13\x5c\2\x6f\14\x5c\2\0\21\x5c\3\0\6\x5c\2\x6d\21\x5c\2\0\21\x5c\3\0\2\x5c\2\x6c\25\x5c\2\0\21\x5c\3\0\6\x5c\2\x6b\21\x5c\2\0\21\x5c\3\0\6\x5c\2\x6a\21\x5c\2\0\21\x5c\3\0\2\x5c\2\x69\25\x5c\2\0\21\x5c\3\0\2\x5c\2\x68\25\x5c\2\0\21\x5c\3\0\11\x5c\2\x65\16\x5c\2\0\21\x5c\3\0\2\x5c\2\x64\25\x5c\2\0\21\x5c\3\0\27\x5c\2\0\4\x5c\2\x62\15\x5c\3\0\27\x5c\2\0\2\x5c\2\x61\17\x5c\3\0\27\x5c\2\0\11\x5c\2\x67\10\x5c\3\0\2\x5f\26\x5c\2\0\21\x5c\3\0\27\x5c\2\0\14\x5c\2\x67\5\x5c\3\0\27\x5c\2\0\16\x5c\2\x7f\3\x5c\3\0\3\x5c\2\x5b\24\x5c\2\0\21\x5c\3\0\11\x5c\2\x59\16\x5c\2\0\21\x5c\3\0\27\x5c\2\0\10\x5c\2\x58\3\x5c\2\x5a\2\x5c\2\x67\4\x5c\3\0\4\x5c\2\x57\23\x5c\2\0\21\x5c\3\0\27\x5c\2\0\3\x5c\2\x56\16\x5c\3\0\27\x5c\2\0\5\x5c\2\55\14\x5c\3\0\2\x55\26\x5c\2\0\21\x5c\3\0\13\x5c\2\x54\14\x5c\2\0\21\x5c\3\0\27\x5c\2\0\2\x5c\2\55\17\x5c\3\0\20\x5c\2\x94\7\x5c\2\0\21\x5c\3\0\23\x5c\2\x53\4\x5c\2\0\21\x5c\3\0\2\x5c\2\x51\25\x5c\2\0\21\x5c\3\0\2\x5c\2\x50\25\x5c\2\0\21\x5c\3\0\24\x5c\2\55\3\x5c\2\0\21\x5c\3\0\24\x5c\2\54\3\x5c\2\0\21\x5c\3\0\4\x5c\2\x4e\23\x5c\2\0\21\x5c\3\0\21\x5c\2\60\6\x5c\2\0\21\x5c\3\0\16\x5c\2\x4d\11\x5c\2\0\21\x5c\3\0\2\x4c\26\x5c\2\0\21\x5c\3\0\17\x5c\2\60\10\x5c\2\0\21\x5c\3\0\13\x5c\2\x4b\4\x5c\2\x7c\10\x5c\2\0\21\x5c\3\0\12\x5c\2\x4a\15\x5c\2\0\21\x5c\3\0\16\x5c\2\60\11\x5c\2\0\21\x5c\3\0\16\x5c\2\55\11\x5c\2\0\21\x5c\3\0\14\x5c\2\x48\13\x5c\2\0\21\x5c\3\0\13\x5c\2\x47\14\x5c\2\0\21\x5c\3\0\15\x5c\2\57\12\x5c\2\0\21\x5c\3\0\11\x5c\2\x46\16\x5c\2\0\21\x5c\3\0\4\x5c\2\x44\23\x5c\2\0\21\x5c\3\0\2\x43\26\x5c\2\0\21\x5c\3\0\13\x5c\2\x41\14\x5c\2\0\21\x5c\3\0\13\x5c\2\71\14\x5c\2\0\21\x5c\3\0\4\x5c\2\x40\23\x5c\2\0\21\x5c\3\0\4\x5c\2\77\23\x5c\2\0\21\x5c\3\0\4\x5c\2\75\23\x5c\2\0\21\x5c\3\0\3\x5c\2\76\24\x5c\2\0\21\x5c\3\0\11\x5c\2\64\16\x5c\2\0\21\x5c\3\0\11\x5c\2\60\16\x5c\2\0\21\x5c\3\0\3\x5c\2\x49\3\x5c\2\74\7\x5c\2\x90\12\x5c\2\0\21\x5c\3\0\7\x5c\2\73\13\x5c\2\x7f\5\x5c\2\0\21\x5c\3\0\6\x5c\2\73\7\x5c\2\x45\12\x5c\2\0\21\x5c\3\0\10\x5c\2\61\17\x5c\2\0\21\x5c\3\0\10\x5c\2\56\17\x5c\2\0\21\x5c\3\0\7\x5c\2\70\20\x5c\2\0\21\x5c\3\0\6\x5c\2\63\21\x5c\2\0\21\x5c\3\0\3\x5c\2\66\24\x5c\2\0\21\x5c\3\0\5\x5c\2\62\22\x5c\2\0\21\x5c\3\0\5\x5c\2\60\4\x5c\2\60\16\x5c\2\0\21\x5c\3\0\3\x5c\2\61\24\x5c\2\0\21\x5c\3\0\4\x5c\2\60\23\x5c\2\0\21\x5c\3\0\4\x5c\2\55\23\x5c\2\0\21\x5c\3\0\2\x5c\2\60\25\x5c\2\0\21\x5c\3\0\2\x5c\2\55\25\x5c\2\0\21\x5c\3\0\2\55\26\x5c\2\0\20\x5c\61\x99\2\46\5\x99\2\x9a\52\x99\2\x95\11\x99\2\46\5\x99\2\x9a\20\x99\2\x96\32\x99\2\x95\11\x99\2\46\5\x99\2\x9a\20\x99\2\x96\16\x99\2\x97\14\x99\2\x95\11\x99\2\46\5\x99\2\x9a\63\x99\2\x98\5\x99\2\x9a\3\x99\71\x9b\61\x99\2\25\2\4\10\x99\2\10\2\52\2\50\2\53\2\65\2\x7e\2\x78\2\x84\2\x83\3\x5c\2\x6e\2\72\2\x77\2\x8c\2\x85\2\x5c\2\x71\2\x5c\2\x4f\2\x5c\2\67\2\x52\2\x5c\2\x89\2\x66\2\10\2\x60\5\x5c\2\x63\2\x5e\3\52\2\x5c\4\52\3\x5c\2\27\2\44\2\31\2\45\2\32\2\33\2\7\2\x9c\4\7\3\10\2\6\2\5\61\13\2\37\11\13\61\15\2\40\11\15\2\20\66\17\2\41\2\20\2\17\2\23\66\22\2\42\2\22\2\23","\1\2\4\2\15\2\20\2\7\2\25\2\21\2\6\2\31\2\10\2\13\2\14\2\16\2\17\2\23\2\22\2\24\2\27\2\26\2\30\2\20\2\12\7\6\4\0\2\14\2\17\2\22\2\26\2\20\3\31\2\20\2\1\2\31\2\0\2\1\2\6\3\4\2\3\3\2\x63\5\2\1\2\5\5\20\3\0\2\11\2\6\2\0\2\11\5\0","\1\13\66\2\1\27\66\2\63\2\70\2\66\2\52\2\65\2\57\2\71\3\66\2\61\2\55\2\66\2\4\2\3\2\62\2\2\2\46\2\44\2\43\3\2\2\47\2\2\2\50\2\2\3\66\2\56\2\53\2\54\3\66\2\27\2\45\2\52\2\31\2\36\4\52\2\42\6\52\2\32\3\52\2\34\2\41\10\52\2\66\2\67\2\66\2\64\2\52\2\66\2\12\2\24\2\20\2\16\2\10\2\11\2\35\2\23\2\17\2\33\2\25\2\13\2\51\2\15\2\21\2\40\2\52\2\6\2\14\2\5\2\7\2\26\2\22\2\37\2\30\2\52\2\66\2\60\x84\66"],[this.TABLE._base,this.TABLE._default,this.TABLE._check,this.TABLE._next,this.TABLE._action,this.TABLE._eqc])};f.prototype={read_ch:function(){if(this.idx>=this.end){return this.chr=-1}else{this.chr=this.src.charCodeAt(this.idx++);if(this.chr===10){this.sync.cur_para++}return this.chr}},action:function(j){switch(j){case 3:this.yystyle="object";break;case 2:this.yystyle="param";break;case 12:this.yystyle="doc_comment";this.yydefault="doc_comment";this.yygoto(e);break;case 15:this.yystyle="regexp";break;case 6:this.yystyle="comment";this.yydefault="comment";this.yygoto(b);break;case 9:this.yystyle="comment";this.yydefault="comment";this.yygoto(i);break;case 1:this.yystyle="keyword";break;case 20:this.yystyle="string";this.yydefault="string";this.yygoto(g);break;case 16:this.yystyle="string";this.yydefault="string";this.yygoto(h);break;case 4:this.yystyle=this.yydefault;break;case 5:this.yystyle="operator";break;case 0:this.yystyle="value";break;case 24:this.yystyle="plain";break;case 7:this.yystyle="comment";this.yydefault="plain";this.yygoto(d);break;case 8:this.yystyle="comment";break;case 10:this.yystyle="comment";this.yydefault="plain";this.yygoto(d);break;case 11:this.yystyle="comment";break;case 13:this.yystyle="doc_comment";this.yydefault="plain";this.yygoto(d);break;case 14:this.yystyle="doc_comment";break;case 18:this.yystyle="string";break;case 17:this.yystyle="string";break;case 19:this.yystyle="string";this.yydefault="plain";this.yygoto(d);break;case 22:this.yystyle="string";break;case 21:this.yystyle="string";break;case 23:this.yystyle="string";this.yydefault="plain";this.yygoto(d);break;default:this.yystyle=this.yydefault;break}}};c.inherit(f,a._LexerBase);a.register({name:"javascript, js",instance:new f()})})(dLighter._Lexer,dLighter.$);(function(b,a){b.register({name:"dLighter",global:{font_size:16,font_name:"Consolas",background:"#F2F4FF",color:"black",caret_color:"purple"},gutter:{number_color:"#afafaf",line_color:"#6ce26c"},selected:{background:"#B4D5FF"},highlight:{background:"#e0e0e0"},code:{keyword:{color:"#006699",bold:true},value:{color:"#009900"},comment:{color:"#5f5a60",italic:true},operator:{color:"black"},string:{color:"blue"}},language:{"javascript, js":{doc_comment:{color:"#008080",italic:true},regexp:{color:"#0066cc",bold:true},object:{color:"#ff1493"},param:{color:"#ff1493",italic:true}},css:{important:{color:"red",italic:true}},"xml,html,xhtml,xslt":{property:{color:"#ff1493"}}}})})(dLighter._Theme,dLighter.$);