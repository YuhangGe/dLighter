<!DOCTYPE html>
<html>
<head>
    <title>dLighter</title>
    <meta content="text/html" charset="utf-8">
    <link rel="stylesheet" href="../src/dLighter.css" />
    <script type="text/javascript" src="../lib/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../lib/js-printf.js"></script>
    <script type="text/javascript" src="../src/core/utility.js"></script>
    <script type="text/javascript" src="../src/core/dom.js"></script>
    <script type="text/javascript" src="../src/core/lighter.js"></script>
    <script type="text/javascript" src="../src/core/page.js"></script>
    <script type="text/javascript" src="../src/core/render.js"></script>
    <script type="text/javascript" src="../src/core/measure.js"></script>
    <script type="text/javascript" src="../src/core/scheduler.js"></script>
    <script type="text/javascript" src="../src/core/scroll.js"></script>
    <script type="text/javascript" src="../src/core/theme.js"></script>
    <script type="text/javascript" src="../src/core/event.js"></script>
    <script type="text/javascript" src="../src/core/caret.js"></script>
    <script type="text/javascript" src="../src/core/shortkey.js"></script>
    <script type="text/javascript" src="../src/core/wordseg.js"></script>
    <script type="text/javascript" src="../src/core/lexer.js"></script>
    <script type="text/javascript" src="../src/core/lexer_base.js"></script>
    <script type="text/javascript" src="../src/lexer/lexer_css.js"></script>

    <script type="text/javascript" src="../src/lexer/lexer_js.js"></script>
    <script type="text/javascript" src="../src/theme/dlighter.js"></script>

    <style type="text/css">
        div, pre {
            padding: 0px;
            margin: 0px;
        }
        pre {
            width: 100%;
            height: 100%;
            font-size: 15px;
            font-family: "Courier 10 Pitch",Courier,monospace;
        }
    </style>
    <script type="text/javascript">
        (function(){
            var $, detectBaseline, _ref;

            $ = (_ref = this.jQuery) != null ? _ref : require('jQuery');

            detectBaseline = function(el) {
                var $bigA, $container, $smallA;
                if (el == null) {
                    el = 'body';
                }
                $container = $('<div style=""/>');
                $smallA = $('<span style="font-size:0;">A</span>');
                $bigA = $('<span style="font-size:999px;">A</span>');
                $container.append($smallA).append($bigA).appendTo(el);
//                setTimeout((function() {
//                    return $container.remove();
//                }), 10);
                return $smallA.position().top / $bigA.height();
            };

            $.fn.baseline = function() {
                return detectBaseline(this.get(0));
            };
        })();

        function doTest() {
//            var d = new Date().getTime();
            li = dLighter.createLighter($("pre")[0]);
//            console.log(new Date().getTime()-d);
        }
        function doCopy() {
            $($("pre")[0]).text($("#ta").val());
        }
    </script>
</head>
<body>
    <h1>dLighter Demo</h1>
    <p>Demo 1</p>
    <div><input type="button" onclick="doCopy();" value="Copy" /><input type="button" onclick="doTest();" value="Test"></div>
    <div>
        <textarea id="ta"></textarea>
    </div>
    <div>
        <pre lang="css" break_line="false" height="300">
            lexer_js.js
        </pre>
    </div>
    <p>Demo 2</p>
    <div style="text-align: center;">
        <div style="text-align:left; display: inline-block; width: 600px; height: 400px;">
            <pre lang="vb">
                public sub a()
                dim i as integer = 10

                end sub
            </pre>
        </div>
    </div>
    <div style="font-family: consolas;font-size: 50px;border: 1px solid blue;position: relative;">
        <span id="s1" style="font-size: 0px; border: 1px solid green;">aijJ</span>
        <span id="st" style="vertical-align: baseline; border: 1px solid red;">aijJ</span>
        <input type="text" id="txt1" value="test"/>
    </div>
</body>
</html>